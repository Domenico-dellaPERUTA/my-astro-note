<VirtualHost *:80>
    ServerName notes.local

    # 1. Alias per la cartella dei media
    # Questo dice ad Apache: "Se l'URL inizia con /WebApp, guarda in quella cartella"
    Alias /WebApp /Library/WebServer/WebApp

    <Directory "/Library/WebServer/WebApp">
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    # 2. Escludi /WebApp dal Proxy
    ProxyPass /WebApp !

    # 3. Configurazione Proxy per tutto il resto
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:4321/
    ProxyPassReverse / http://127.0.0.1:4321/

    ErrorLog "/private/var/log/apache2/notes.local-error_log"
    CustomLog "/private/var/log/apache2/notes.local-access_log" common
</VirtualHost>
